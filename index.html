<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>WebAssembly vs JavaScript | Performance Comparison</title>
		<!-- styling -->
		<link rel="stylesheet" href="css/1global.css" />
		<link rel="stylesheet" href="css/2layout.css" />
		<link rel="stylesheet" href="css/3hero.css" />
		<link rel="stylesheet" href="css/4info.css" />
		<link rel="stylesheet" href="css/5benchmark.css" />
		<link rel="stylesheet" href="css/6test_item.css" />
		<link rel="stylesheet" href="css/7gradient_divider.css" />
		<link rel="stylesheet" href="css/8image_comparison.css" />
		<link rel="stylesheet" href="css/9file_input.css" />
		<link rel="stylesheet" href="css/10speed_summary.css" />
		<link rel="stylesheet" href="css/11results.css" />
		<link rel="stylesheet" href="css/12footer.css" />
		<link rel="stylesheet" href="css/13settings.css" />
		<link rel="stylesheet" href="css/styles.css" />
		<script src="css/sticky_headers.js" type="module"></script>
	</head>
	<body>
		<!-- Hero Section -->
		<section class="hero">
			<h1>
				<span class="js">JavaScript</span>
				<span class="vs">vs</span>
				<span class="wasm">WebAssembly</span>
			</h1>
			<p>A practical visual performance comparison of CPU-intensive image processing tasks.</p>
			<div class="scroll-indicator"></div>
		</section>

		<div class="container">
			<!-- Info Section -->
			<section class="info-section">
				<div class="info-box">
					<h2>About This Research</h2>
					<p>
						What if WebAssembly is not truly faster than JS everywhere? This project tries to
						understand whereS and howS.
					</p>
				</div>

				<div class="info-box">
					<h2>Why Image Processing?</h2>
					<p>
						Why not? Image processing is a commonly used in most popular applications today and it
						requires a lot of CPU power, which makes it a suitable choice for optimizing with WASM.
					</p>
				</div>

				<div class="info-box">
					<h2>Measured Metrics</h2>
					<ul class="metrics-list">
						<li>
							<strong>Execution Time:</strong> Total processing duration in
							<code style="color: rgb(255, 220, 47)">milliseconds</code>
						</li>
						<li>
							<strong>Cold start:</strong> Time taken for the first run, including any
							initialization overhead
						</li>
						<li>
							<strong>Pixel Rate:</strong> Number of pixels processed per second (<code
								style="color: rgb(255, 220, 47)"
								>MP/s</code
							>)
						</li>
						<li>
							<strong>Consistency:</strong> Variability in execution time across multiple runs
						</li>
						<li>
							<strong>Image Size Impact:</strong> How performance scales with different image
							sizes
						</li>
					</ul>
				</div>
			</section>

			<!-- Benchmark Section -->
			<section class="benchmark-section">
				<h2 class="benchmark-title">Performance Benchmarks</h2>

				<!-- Test 1: Color Inversion -->
				<div class="test-item" data-test="invert">
					<div class="test-header">
						<div class="test-number">Test 01</div>
						<h3 class="test-title">Color Inversion</h3>
						<p class="test-description">
							Lightweight operation - inverting RGB values pixel by pixel
						</p>
					</div>

					<!-- Hidden Sticky Header -->
					<div class="hidden-sticky-header">
						<span class="test-number-badge">Test 01</span>
						<span class="test-title-text">Color Inversion</span>
						<button class="sticky-settings-btn" data-test="invert">Settings</button>
					</div>

					<div class="test-content">
						<div class="gradient-divider"></div>
						<div class="image-comparison" style="grid-template-columns: 1fr; margin-bottom: 1rem">
							<div class="image-container" data-side="original">
								<div class="dimension-indicators">
									<div class="dimension-width">
										<div class="dimension-line"></div>
										<div class="dimension-label"><span class="dim-value">0</span> px</div>
									</div>
									<div class="dimension-height">
										<div class="dimension-line"></div>
										<div class="dimension-label"><span class="dim-value">0</span> px</div>
									</div>
								</div>
								<div class="image-label">Original</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Original uploaded image</div>
								</div>
								<img class="actual-image" src="" alt="Original" />
							</div>
						</div>

						<!-- Verification Badge -->
						<div style="text-align: center; margin: 1rem 0">
							<div class="verification-badge">Results Verified Identical</div>
						</div>

						<div class="image-comparison" style="grid-template-columns: 1fr 1fr">
							<div class="image-container" data-side="js">
								<div class="image-label">JavaScript</div>
								<div class="countdown-overlay">3</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Click "Select Image" below</div>
								</div>
								<img class="actual-image" src="" alt="Processing result" />
							</div>

							<div class="image-container" data-side="wasm">
								<div class="image-label">WebAssembly</div>
								<div class="countdown-overlay">3</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Same image as JavaScript</div>
								</div>
								<img class="actual-image" src="" alt="Processing result" />
							</div>
						</div>

						<!-- Control Center -->
						<div class="control-center">
							<button class="upload-button" data-test="invert">üìÅ Select Image</button>
							<button class="run-test-button" data-test="invert" disabled>Run Complete Test</button>
						</div>
						<input type="file" class="hidden-file-input" accept="image/*" data-test="invert" />

						<!-- Speedup Summary -->
						<div class="speedup-summary"></div>

						<!-- Results Dashboard -->
						<div class="results-dashboard">
							<div class="dashboard-header">
								<div class="results-label">‚ü© Performance Analysis</div>
								<div class="metric-selector">
									<button class="metric-tab active" data-metric="time">Execution Time</button>
									<button class="metric-tab" data-metric="warmup">Cold Start</button>
									<button class="metric-tab" data-metric="pixelRate">Pixel Rate</button>
									<button class="metric-tab" data-metric="consistency">Consistency</button>
									<button class="metric-tab" data-metric="imageSize">Image Size Impact</button>
								</div>
							</div>

							<div class="chart-container">
								<div class="empty-state">Run tests to see performance comparison</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Test 2: Edge detection -->
				<div class="test-item" data-test="batch">
					<div class="test-header">
						<div class="test-number">Test 02</div>
						<h3 class="test-title">Edge detection</h3>
						<p class="test-description">
							Medium-intensity operation - detecting edges using the Sobel operator
						</p>
					</div>

					<!-- Hidden Sticky Header -->
					<div class="hidden-sticky-header">
						<span class="test-number-badge">Test 02</span>
						<span class="test-title-text">Edge detection</span>
						<button class="sticky-settings-btn" data-test="batch">Settings</button>
					</div>
					<div class="test-content">
						<div class="gradient-divider"></div>
						<div class="image-comparison" style="grid-template-columns: 1fr; margin-bottom: 1rem">
							<div class="image-container" data-side="original">
								<div class="dimension-indicators">
									<div class="dimension-width">
										<div class="dimension-line"></div>
										<div class="dimension-label"><span class="dim-value">0</span> px</div>
									</div>
									<div class="dimension-height">
										<div class="dimension-line"></div>
										<div class="dimension-label"><span class="dim-value">0</span> px</div>
									</div>
								</div>
								<div class="image-label">Original</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Original uploaded image</div>
								</div>
								<img class="actual-image" src="" alt="Original" />
							</div>
						</div>

						<!-- Verification Badge  -->
						<div style="text-align: center; margin: 1rem 0">
							<div class="verification-badge">Results Verified Identical</div>
						</div>
						<div class="image-comparison" style="grid-template-columns: 1fr 1fr">
							<div class="image-container" data-side="js">
								<div class="image-label">JavaScript</div>
								<div class="countdown-overlay">3</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Click "Select Image" below</div>
								</div>
								<img class="actual-image" src="" alt="Processing result" />
							</div>

							<div class="image-container" data-side="wasm">
								<div class="image-label">WebAssembly</div>
								<div class="countdown-overlay">3</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Same content as JavaScript</div>
								</div>
								<img class="actual-image" src="" alt="Processing result" />
							</div>
						</div>

						<div class="control-center">
							<button class="upload-button" data-test="batch">üìÅ Select Image</button>
							<button class="run-test-button" data-test="batch" disabled>Run Complete Test</button>
						</div>
						<input type="file" class="hidden-file-input" accept="image/*" data-test="batch" />

						<!-- Speedup Summary -->
						<div class="speedup-summary"></div>

						<div class="results-dashboard">
							<div class="dashboard-header">
								<div class="results-label">‚ü© Performance Analysis</div>
								<div class="metric-selector">
									<button class="metric-tab active" data-metric="time">Execution Time</button>
									<button class="metric-tab" data-metric="warmup">Cold Start</button>
									<button class="metric-tab" data-metric="consistency">Consistency</button>
									<button class="metric-tab" data-metric="imageSize">Image Size Impact</button>
								</div>
							</div>

							<div class="chart-container">
								<div class="empty-state">Run tests to see performance comparison</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Test 3: Color Quantization -->
				<div class="test-item" data-test="blur">
					<div class="test-header">
						<div class="test-number">Test 03</div>
						<h3 class="test-title">Color Quantization (K-Means)</h3>
						<p class="test-description">
							High-weight operation - reducing colors using K-Means clustering algorithm
						</p>
					</div>

					<!-- Hidden Sticky Header -->
					<div class="hidden-sticky-header">
						<span class="test-number-badge">Test 03</span>
						<span class="test-title-text">Color Quantization (K-Means)</span>
						<button class="sticky-settings-btn" data-test="blur">Settings</button>
					</div>

					<div class="test-content">
						<div class="gradient-divider"></div>

						<div class="image-comparison" style="grid-template-columns: 1fr; margin-bottom: 1rem">
							<div class="image-container" data-side="original">
								<div class="dimension-indicators">
									<div class="dimension-width">
										<div class="dimension-line"></div>
										<div class="dimension-label"><span class="dim-value">0</span> px</div>
									</div>
									<div class="dimension-height">
										<div class="dimension-line"></div>
										<div class="dimension-label"><span class="dim-value">0</span> px</div>
									</div>
								</div>
								<div class="image-label">Original</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Original uploaded image</div>
								</div>
								<img class="actual-image" src="" alt="Original" />
							</div>
						</div>

						<!-- Verification Badge  -->
						<div style="text-align: center; margin: 1rem 0">
							<div class="verification-badge">Results Verified Identical</div>
						</div>
						<div class="image-comparison" style="grid-template-columns: 1fr 1fr">
							<div class="image-container" data-side="js">
								<div class="image-label">JavaScript</div>
								<div class="countdown-overlay">3</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Click "Select Image" below</div>
								</div>
								<img class="actual-image" src="" alt="Processing result" />
							</div>

							<div class="image-container" data-side="wasm">
								<div class="image-label">WebAssembly</div>
								<div class="countdown-overlay">3</div>
								<div class="image-placeholder">
									<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
										<circle cx="8.5" cy="8.5" r="1.5"></circle>
										<polyline points="21 15 16 10 5 21"></polyline>
									</svg>
									<div class="upload-hint">Same image as JavaScript</div>
								</div>
								<img class="actual-image" src="" alt="Processing result" />
							</div>
						</div>

						<div class="control-center">
							<div class="color-selector-wrapper">
								<label for="color-count-blur" class="color-label">Output Colors:</label>
								<input
									type="number"
									id="color-count-blur"
									class="color-input"
									min="2"
									max="256"
									value="256"
									step="1"
									data-test="blur"
									oninput="this.value = Math.min(256, Math.max(2, parseInt(this.value) || 2))"
								/>
								<span class="color-hint">(2-256 colors)</span>
							</div>
							<button class="upload-button" data-test="blur">üìÅ Select Image</button>
							<button class="run-test-button" data-test="blur" disabled>Run Complete Test</button>
						</div>
						<input type="file" class="hidden-file-input" accept="image/*" data-test="blur" />

						<!-- Speedup Summary -->
						<div class="speedup-summary"></div>

						<div class="results-dashboard">
							<div class="dashboard-header">
								<div class="results-label">‚ü© Performance Analysis</div>
								<div class="metric-selector">
									<button class="metric-tab active" data-metric="time">Execution Time</button>
									<button class="metric-tab" data-metric="warmup">Cold Start</button>
									<button class="metric-tab" data-metric="consistency">Consistency</button>
									<button class="metric-tab" data-metric="imageSize">Image Size Impact</button>
								</div>
							</div>

							<div class="chart-container">
								<div class="empty-state">Run tests to see performance comparison</div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!-- Methodology Section -->
			<section class="info-section">
				<div class="info-box">
					<h2>Methodology</h2>
					<p>
						Each test runs multiple iterations (1-30 depending on image size) to ensure statistical
						reliability. Results show the median value to reduce the impact of outliers caused by
						browser garbage collection or system processes. Run counts and other variables related to 
						the tests are <div style="color:rgb(255, 220, 47)"> fully customizable</div> in the settings panel, but initially predefined in order to fit my computer's capabilities. (Sorry)

					</p>
				</div>
			</section>
		</div>
		<div class="settings-overlay" id="settingsOverlay">
			<div class="settings-content">
				<!-- Current Image Info -->
				<div class="current-image-info" id="currentImageInfo" style="display: none">
					<h3>Current Image</h3>
					<div class="image-stats">
						<div class="stat-item">
							<span class="stat-label">Dimensions:</span>
							<span class="stat-value" id="currentImageDimensions">-</span>
						</div>
						<div class="stat-item">
							<span class="stat-label">Megapixels:</span>
							<span class="stat-value" id="currentImageMP">-</span>
						</div>
						<div class="stat-item">
							<span class="stat-label">Category:</span>
							<span class="stat-value" id="currentImageCategory">-</span>
						</div>
					</div>
				</div>

				<!-- Test Settings -->
				<div class="setting-group"">
				<h3 id="settingsTestTitle">Test Settings</h3>

				<div class="setting-item">
					<label>Max Dimension:</label>
					<input type="number" id="setting-max-dimension" min="1000" max="20000" step="1000" />
					<span class="setting-unit">pixels</span>
				</div>

				<div class="setting-item">
					<label>Small Image Threshold:</label>
					<input type="number" id="setting-small-threshold" min="0.1" max="50" step="0.1" />
					<span class="setting-unit">MP</span>
				</div>

				<div class="setting-item">
					<label>Medium Image Threshold:</label>
					<input type="number" id="setting-medium-threshold" min="0.1" max="50" step="0.1" />
					<span class="setting-unit">MP</span>
				</div>

				<div class="setting-item">
					<label>Small Image Runs:</label>
					<input type="number" id="setting-small-runs" min="1" max="50" step="1" />
					<span class="setting-unit">iterations</span>
				</div>

				<div class="setting-item">
					<label>Medium Image Runs:</label>
					<input type="number" id="setting-medium-runs" min="1" max="30" step="1" />
					<span class="setting-unit">iterations</span>
				</div>

				<div class="setting-item">
					<label>Large Image Runs:</label>
					<input type="number" id="setting-large-runs" min="1" max="10" step="1" />
					<span class="setting-unit">iterations</span>
				</div>
			</div>

			<div class="settings-actions">
				<button class="settings-save" id="settingsSave">Save Settings</button>
				<button class="settings-reset" id="settingsReset">Reset to Defaults</button>
			</div>
		</div>
		</div>

		<footer>
			<p>Bachelor's Thesis | Information Technology | 2025</p>
			<p style="margin-top: 0.5rem; font-size: 0.9rem">
				Developed by
				<strong style="color: var(--text-highlight)">Andrei Gulin</strong>
			</p>
		</footer>

		<script src="js/app.js" type="module"></script>
	</body>
</html>
